"use strict";(self.webpackChunkschool_recycle=self.webpackChunkschool_recycle||[]).push([[3994],{23994:function(e,t,n){n.r(t),n.d(t,{MetaMaskConnector:function(){return x}});var r=n(74165),s=n(15861),c=n(1413),i=n(15671),a=n(43144),o=n(97326),h=n(60136),u=n(29388),p=n(63700),d=n(46170),l=n(12738),v=n(22766),f=n(66131),m=n(97419),k=n(68478),w=(n(13631),new WeakMap),x=function(e){(0,h.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;(0,i.Z)(this,n);var s={name:"MetaMask",shimDisconnect:!0,shimChainChangedDisconnect:!0,getProvider:k.g},a=(0,c.Z)((0,c.Z)({},s),e.options);return r=t.call(this,{chains:e.chains,options:a,connectorStorage:e.connectorStorage}),(0,d._)((0,o.Z)(r),"id",v.w.metamask),(0,p._)((0,o.Z)(r),w,{writable:!0,value:void 0}),(0,p.a)((0,o.Z)(r),w,a.UNSTABLE_shimOnConnectSelectAccount),r}return(0,a.Z)(n,[{key:"connect",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,s,c,i,a,o,h,u,d=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.prev=1,e.next=4,this.getProvider();case 4:if(c=e.sent){e.next=7;break}throw new l.a;case 7:if(this.setupListeners(),this.emit("message",{type:"connecting"}),i=null,!(0,p.b)(this,w)||null===(n=this.options)||void 0===n||!n.shimDisconnect||Boolean(this.connectorStorage.getItem(this.shimDisconnectKey))){e.next=25;break}return e.next=13,this.getAccount().catch((function(){return null}));case 13:if(i=e.sent,!!!i){e.next=25;break}return e.prev=16,e.next=19,c.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});case 19:e.next=25;break;case 21:if(e.prev=21,e.t0=e.catch(16),!this.isUserRejectedRequestError(e.t0)){e.next=25;break}throw new l.U(e.t0);case 25:if(i){e.next=30;break}return e.next=28,c.request({method:"eth_requestAccounts"});case 28:a=e.sent,i=m.getAddress(a[0]);case 30:return e.next=32,this.getChainId();case 32:if(o=e.sent,h=this.isChainUnsupported(o),!t.chainId||o===t.chainId){e.next=45;break}return e.prev=35,e.next=38,this.switchChain(t.chainId);case 38:o=t.chainId,h=this.isChainUnsupported(t.chainId),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(35),console.error("Could not switch to chain id : ".concat(t.chainId),e.t1);case 45:if(null===(s=this.options)||void 0===s||!s.shimDisconnect){e.next=48;break}return e.next=48,this.connectorStorage.setItem(this.shimDisconnectKey,"true");case 48:return u={chain:{id:o,unsupported:h},provider:c,account:i},this.emit("connect",u),e.abrupt("return",u);case 53:if(e.prev=53,e.t2=e.catch(1),!this.isUserRejectedRequestError(e.t2)){e.next=57;break}throw new l.U(e.t2);case 57:if(-32002!==e.t2.code){e.next=59;break}throw new l.R(e.t2);case 59:throw e.t2;case 60:case"end":return e.stop()}}),e,this,[[1,53],[16,21],[35,42]])})));return function(){return e.apply(this,arguments)}}()},{key:"switchAccount",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:return t=e.sent,e.next=5,t.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(f._)}}]);
//# sourceMappingURL=3994.695af967.chunk.js.map