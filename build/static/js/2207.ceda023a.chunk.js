"use strict";(self.webpackChunkschool_recycle=self.webpackChunkschool_recycle||[]).push([[2207],{83346:function(t,r,e){e.d(r,{S:function(){return i}});var n=e(74165),a=e(15861),c=e(15671),s=e(43144),o=e(4942),u=e(95474),i=function(){function t(r,e,s){var i=this;(0,c.Z)(this,t),(0,o.Z)(this,"transfer",(0,u.dt)(function(){var t=i;return function(){var r=(0,a.Z)((0,n.Z)().mark((function r(e,a,c){var s,o=arguments;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=o.length>3&&void 0!==o[3]?o[3]:[0],r.abrupt("return",t.erc1155.transfer.prepare(e,a,c,s));case 2:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}()}())),(0,o.Z)(this,"setApprovalForAll",(0,u.dt)(function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r,e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.erc1155.setApprovalForAll.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,o.Z)(this,"airdrop",(0,u.dt)(function(){var t=i;return function(){var r=(0,a.Z)((0,n.Z)().mark((function r(e,a){var c,s=arguments;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=s.length>2&&void 0!==s[2]?s[2]:[0],r.abrupt("return",t.erc1155.airdrop.prepare(e,a,c));case 2:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}()}())),this.contractWrapper=r,this.storage=e,this.erc1155=new u.aL(this.contractWrapper,this.storage,s),this._chainId=s}return(0,s.Z)(t,[{key:"chainId",get:function(){return this._chainId}},{key:"onNetworkUpdated",value:function(t){this.contractWrapper.updateSignerOrProvider(t)}},{key:"getAddress",value:function(){return this.contractWrapper.readContract.address}},{key:"get",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.erc1155.get(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"totalSupply",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.erc1155.totalSupply(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r,e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.erc1155.balanceOf(r,e));case 1:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"balance",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.erc1155.balance(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"isApproved",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r,e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.erc1155.isApproved(r,e));case 1:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()}]),t}()},89385:function(t,r,e){e.d(r,{h:function(){return o}});var n=e(74165),a=e(15861),c=e(49242),s=e(95474);function o(t,r,e){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)((0,n.Z)().mark((function t(r,e,a){var o,u,i,p,d;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getProvider(),u=new s.ds(o,e,c,{},r.storage),t.next=4,r.getSignerAddress();case 4:return i=t.sent,p=r.address,t.next=8,u.read("allowance",[i,p]);case 8:return d=t.sent,t.abrupt("return",d.gte(a));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},12207:function(t,r,e){e.r(r),e.d(r,{Pack:function(){return E}});var n=e(1413),a=e(97326),c=e(60136),s=e(29388),o=e(37762),u=e(74165),i=e(15861),p=e(15671),d=e(43144),f=e(4942),h=e(95474),v=e(83346),l=e(49242),k=e(27761),w=e(2257),g=e(6222),Z=e(68624),b=e(2299),m=e(60874),y=e(89385),x=(e(20737),e(78262),e(66315),e(84255),e(13631),e(80518),m.z.object({contractAddress:h.ab})),W=x.extend({quantity:b.A}),A=x.extend({tokenId:h.a8}),R=x.extend({tokenId:h.a8,quantity:h.a8}),C=W.omit({quantity:!0}).extend({quantityPerReward:b.A}),P=A,I=R.omit({quantity:!0}).extend({quantityPerReward:h.a8}),S=function(){return C.extend({totalRewards:h.a8.default("1")})}(),O=P,L=function(){return I.extend({totalRewards:h.a8.default("1")})}(),T=function(){return m.z.object({erc20Rewards:m.z.array(S).default([]),erc721Rewards:m.z.array(O).default([]),erc1155Rewards:m.z.array(L).default([])})}(),U=function(){return T.extend({packMetadata:b.N,rewardsPerPack:h.a8.default("1"),openStartTime:h.ac.default(new Date)})}(),q=function(){function t(r,e,n,a,c){var s=this;(0,p.Z)(this,t),(0,f.Z)(this,"featureName",h.dT.name),(0,f.Z)(this,"open",(0,h.dt)(function(){var t=s;return function(){var r=(0,i.Z)((0,u.Z)().mark((function r(e){var n,a,c=arguments;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:1,a=c.length>2&&void 0!==c[2]?c[2]:5e5,r.abrupt("return",h.aW.fromContractWrapper({contractWrapper:t.contractWrapper,method:"openPack",args:[e,n],overrides:{gasLimit:a},parse:function(r){var e=w.O$.from(0);try{e=t.contractWrapper.parseLogs("PackOpenRequested",null===r||void 0===r?void 0:r.logs)[0].args.requestId}catch(n){}return{receipt:r,id:e}}}));case 3:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}())),(0,f.Z)(this,"claimRewards",(0,h.dt)(function(){var t=s;return(0,i.Z)((0,u.Z)().mark((function r(){var e,n=arguments;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:5e5,r.abrupt("return",h.aW.fromContractWrapper({contractWrapper:t.contractWrapper,method:"claimRewards",args:[],overrides:{gasLimit:e},parse:function(){var r=(0,i.Z)((0,u.Z)().mark((function r(e){var n,a;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==(n=t.contractWrapper.parseLogs("PackOpened",null===e||void 0===e?void 0:e.logs)).length){r.next=3;break}throw new Error("PackOpened event not found");case 3:return a=n[0].args.rewardUnitsDistributed,r.next=6,t.parseRewards(a);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}));case 2:case"end":return r.stop()}}),r)})))}()));var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new h.ds(r,e,k,a,n);this.contractWrapper=o,this.storage=n,this.chainId=c,this.events=new h.aR(this.contractWrapper)}return(0,d.Z)(t,[{key:"onNetworkUpdated",value:function(t){this.contractWrapper.updateSignerOrProvider(t)}},{key:"getAddress",value:function(){return this.contractWrapper.readContract.address}},{key:"parseRewards",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){var e,n,a,c,s,i,p;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=[],a=[],c=(0,o.Z)(r),t.prev=4,c.s();case 6:if((s=c.n()).done){t.next=22;break}i=s.value,t.t0=i.tokenType,t.next=0===t.t0?11:1===t.t0?16:2===t.t0?18:20;break;case 11:return t.next=13,(0,h.bb)(this.contractWrapper.getProvider(),i.assetContract);case 13:return p=t.sent,e.push({contractAddress:i.assetContract,quantityPerReward:g.formatUnits(i.totalAmount,p.decimals).toString()}),t.abrupt("break",20);case 16:return n.push({contractAddress:i.assetContract,tokenId:i.tokenId.toString()}),t.abrupt("break",20);case 18:return a.push({contractAddress:i.assetContract,tokenId:i.tokenId.toString(),quantityPerReward:i.totalAmount.toString()}),t.abrupt("break",20);case 20:t.next=6;break;case 22:t.next=27;break;case 24:t.prev=24,t.t1=t.catch(4),c.e(t.t1);case 27:return t.prev=27,c.f(),t.finish(27);case 30:return t.abrupt("return",{erc20Rewards:e,erc721Rewards:n,erc1155Rewards:a});case 31:case"end":return t.stop()}}),t,this,[[4,24,27,30]])})));return function(r){return t.apply(this,arguments)}}()},{key:"addPackOpenEventListener",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){var e=this;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.events.addEventListener("PackOpened",function(){var t=(0,i.Z)((0,u.Z)().mark((function t(n){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r,t.t1=n.data.packId.toString(),t.t2=n.data.opener,t.next=5,e.parseRewards(n.data.rewardUnitsDistributed);case 5:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"canClaimRewards",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){var e;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=h.cG,t.t1=r,t.t1){t.next=6;break}return t.next=5,this.contractWrapper.getSignerAddress();case 5:t.t1=t.sent;case 6:return t.t2=t.t1,t.next=9,(0,t.t0)(t.t2);case 9:return e=t.sent,t.next=12,this.contractWrapper.readContract.canClaimRewards(e);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"openAndClaim",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){var e,n,a,c,s,o=arguments;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>1&&void 0!==o[1]?o[1]:1,n=o.length>2&&void 0!==o[2]?o[2]:5e5,t.next=4,this.contractWrapper.sendTransaction("openPackAndClaimRewards",[r,e,n],{gasLimit:w.O$.from(5e5)});case 4:a=t.sent,c=w.O$.from(0);try{s=this.contractWrapper.parseLogs("PackOpenRequested",null===a||void 0===a?void 0:a.logs),c=s[0].args.requestId}catch(u){}return t.abrupt("return",{receipt:a,id:c});case 8:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getLinkBalance",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getLinkContract().balanceOf(this.contractWrapper.readContract.address));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"transferLink",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getLinkContract().transfer(this.contractWrapper.readContract.address,r);case 2:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getLinkContract",value:function(){var t=h.cU[this.chainId];if(!t)throw new Error("No LINK token address found for chainId ".concat(this.chainId));var r=new h.ds(this.contractWrapper.getSignerOrProvider(),t,l,this.contractWrapper.options,this.storage);return new h.au(r,this.storage,this.chainId)}}]),t}(),E=function(t){(0,c.Z)(e,t);var r=(0,s.Z)(e);function e(t,c,s){var d;(0,p.Z)(this,e);var v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4?arguments[4]:void 0,k=arguments.length>5?arguments[5]:void 0,w=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new h.ds(t,c,l,v.gasless&&"openzeppelin"in v.gasless?(0,n.Z)((0,n.Z)({},v),{},{gasless:(0,n.Z)((0,n.Z)({},v.gasless),{},{openzeppelin:(0,n.Z)((0,n.Z)({},v.gasless.openzeppelin),{},{useEOAForwarder:!0})})}):v,s);return d=r.call(this,w,s,k),(0,f.Z)((0,a.Z)(d),"create",(0,h.dt)(function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){var e;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.contractWrapper.getSignerAddress();case 2:return e=t.sent,t.abrupt("return",d.createTo.prepare(e,r));case 4:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,f.Z)((0,a.Z)(d),"addPackContents",(0,h.dt)(function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r,e){var n,a,c,s,o;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.contractWrapper.getSignerAddress();case 2:return n=t.sent,t.next=5,T.parseAsync(e);case 5:return a=t.sent,t.next=8,d.toPackContentArgs(a);case 8:return c=t.sent,s=c.contents,o=c.numOfRewardUnits,t.abrupt("return",h.aW.fromContractWrapper({contractWrapper:d.contractWrapper,method:"addPackContents",args:[r,s,o,n],parse:function(t){var r=d.contractWrapper.parseLogs("PackUpdated",null===t||void 0===t?void 0:t.logs);if(0===r.length)throw new Error("PackUpdated event not found");var e=r[0].args.packId;return{id:e,receipt:t,data:function(){return d.erc1155.get(e)}}}}));case 12:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,f.Z)((0,a.Z)(d),"createTo",(0,h.dt)(function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r,e){var n,a,c,s,o,i,p,f,v;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.dQ)(e.packMetadata,d.storage);case 2:return n=t.sent,t.next=5,U.parseAsync(e);case 5:return a=t.sent,c=a.erc20Rewards,s=a.erc721Rewards,o=a.erc1155Rewards,i={erc20Rewards:c,erc721Rewards:s,erc1155Rewards:o},t.next=10,d.toPackContentArgs(i);case 10:return p=t.sent,f=p.contents,v=p.numOfRewardUnits,t.t0=h.aW,t.t1=d.contractWrapper,t.t2=f,t.t3=v,t.t4=n,t.t5=a.openStartTime,t.t6=a.rewardsPerPack,t.next=22,(0,h.cG)(r);case 22:return t.t7=t.sent,t.t8=[t.t2,t.t3,t.t4,t.t5,t.t6,t.t7],t.t9=function(t){var r=d.contractWrapper.parseLogs("PackCreated",null===t||void 0===t?void 0:t.logs);if(0===r.length)throw new Error("PackCreated event not found");var e=r[0].args.packId;return{id:e,receipt:t,data:function(){return d.erc1155.get(e)}}},t.t10={contractWrapper:t.t1,method:"createPack",args:t.t8,parse:t.t9},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t10));case 27:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,f.Z)((0,a.Z)(d),"open",(0,h.dt)(function(){var t=(0,a.Z)(d);return function(){var r=(0,i.Z)((0,u.Z)().mark((function r(e){var n,a,c=arguments;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:1,a=c.length>2&&void 0!==c[2]?c[2]:5e5,!t._vrf){r.next=4;break}throw new Error("This contract is using Chainlink VRF, use `contract.vrf.open()` or `contract.vrf.openAndClaim()` instead");case 4:return r.abrupt("return",h.aW.fromContractWrapper({contractWrapper:t.contractWrapper,method:"openPack",args:[e,n],overrides:{gasLimit:a},parse:function(){var r=(0,i.Z)((0,u.Z)().mark((function r(e){var n,a,c,s,i,p,d,f,v;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==(n=t.contractWrapper.parseLogs("PackOpened",null===e||void 0===e?void 0:e.logs)).length){r.next=3;break}throw new Error("PackOpened event not found");case 3:a=n[0].args.rewardUnitsDistributed,c=[],s=[],i=[],p=(0,o.Z)(a),r.prev=8,p.s();case 10:if((d=p.n()).done){r.next=26;break}f=d.value,r.t0=f.tokenType,r.next=0===r.t0?15:1===r.t0?20:2===r.t0?22:24;break;case 15:return r.next=17,(0,h.bb)(t.contractWrapper.getProvider(),f.assetContract);case 17:return v=r.sent,c.push({contractAddress:f.assetContract,quantityPerReward:g.formatUnits(f.totalAmount,v.decimals).toString()}),r.abrupt("break",24);case 20:return s.push({contractAddress:f.assetContract,tokenId:f.tokenId.toString()}),r.abrupt("break",24);case 22:return i.push({contractAddress:f.assetContract,tokenId:f.tokenId.toString(),quantityPerReward:f.totalAmount.toString()}),r.abrupt("break",24);case 24:r.next=10;break;case 26:r.next=31;break;case 28:r.prev=28,r.t1=r.catch(8),p.e(r.t1);case 31:return r.prev=31,p.f(),r.finish(31);case 34:return r.abrupt("return",{erc20Rewards:c,erc721Rewards:s,erc1155Rewards:i});case 35:case"end":return r.stop()}}),r,null,[[8,28,31,34]])})));return function(t){return r.apply(this,arguments)}}()}));case 5:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}())),d.abi=h.e.parse(l||[]),d.metadata=new h.ah(d.contractWrapper,h.dV,d.storage),d.app=new h.b0(d.contractWrapper,d.metadata,d.storage),d.roles=new h.ai(d.contractWrapper,e.contractRoles),d.royalties=new h.aj(d.contractWrapper,d.metadata),d.encoder=new h.ag(d.contractWrapper),d.estimator=new h.aQ(d.contractWrapper),d.events=new h.aR(d.contractWrapper),d.interceptor=new h.aS(d.contractWrapper),d.owner=new h.aV(d.contractWrapper),d._vrf=d.detectVrf(),d}return(0,d.Z)(e,[{key:"vrf",get:function(){return(0,h.cc)(this._vrf,h.dT)}},{key:"onNetworkUpdated",value:function(t){var r;this.contractWrapper.updateSignerOrProvider(t),null===(r=this._vrf)||void 0===r||r.onNetworkUpdated(t)}},{key:"getAddress",value:function(){return this.contractWrapper.readContract.address}},{key:"get",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.erc1155.get(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.erc1155.getAll(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getOwned",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.erc1155.getOwned(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getTotalCount",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.erc1155.totalCount());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isTransferRestricted",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(){var r;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.readContract.hasRole((0,h.bI)("transfer"),Z.d);case 2:return r=t.sent,t.abrupt("return",!r);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPackContents",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){var e,n,a,c,s,o,i,p,d,f,v,l;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.readContract.getPackContents(r);case 2:e=t.sent,n=e.contents,a=e.perUnitAmounts,c=[],s=[],o=[],i=0;case 9:if(!(i<n.length)){t.next=29;break}p=n[i],d=a[i],t.t0=p.tokenType,t.next=0===t.t0?15:1===t.t0?22:2===t.t0?24:26;break;case 15:return t.next=17,(0,h.bb)(this.contractWrapper.getProvider(),p.assetContract);case 17:return f=t.sent,v=g.formatUnits(d,f.decimals),l=g.formatUnits(w.O$.from(p.totalAmount).div(d),f.decimals),c.push({contractAddress:p.assetContract,quantityPerReward:v,totalRewards:l}),t.abrupt("break",26);case 22:return s.push({contractAddress:p.assetContract,tokenId:p.tokenId.toString()}),t.abrupt("break",26);case 24:return o.push({contractAddress:p.assetContract,tokenId:p.tokenId.toString(),quantityPerReward:d.toString(),totalRewards:w.O$.from(p.totalAmount).div(d).toString()}),t.abrupt("break",26);case 26:i++,t.next=9;break;case 29:return t.abrupt("return",{erc20Rewards:c,erc721Rewards:s,erc1155Rewards:o});case 30:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"toPackContentArgs",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r){var e,n,a,c,s,i,p,d,f,v,l,k,g,Z,b,m,x,W;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],n=[],a=r.erc20Rewards,c=r.erc721Rewards,s=r.erc1155Rewards,i=this.contractWrapper.getProvider(),t.next=6,this.contractWrapper.getSignerAddress();case 6:p=t.sent,d=(0,o.Z)(a),t.prev=8,d.s();case 10:if((f=d.n()).done){t.next=25;break}return v=f.value,t.next=14,(0,h.ba)(i,v.quantityPerReward,v.contractAddress);case 14:return l=t.sent,k=l.mul(v.totalRewards),t.next=18,(0,y.h)(this.contractWrapper,v.contractAddress,k);case 18:if(t.sent){t.next=21;break}throw new Error('ERC20 token with contract address "'.concat(v.contractAddress,'" does not have enough allowance to transfer.\n\nYou can set allowance to the multiwrap contract to transfer these tokens by running:\n\nawait sdk.getToken("').concat(v.contractAddress,'").setAllowance("').concat(this.getAddress(),'", ').concat(k,");\n\n"));case 21:n.push(v.totalRewards),e.push({assetContract:v.contractAddress,tokenType:0,totalAmount:k,tokenId:0});case 23:t.next=10;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(8),d.e(t.t0);case 30:return t.prev=30,d.f(),t.finish(30);case 33:g=(0,o.Z)(c),t.prev=34,g.s();case 36:if((Z=g.n()).done){t.next=47;break}return b=Z.value,t.next=40,(0,h.dC)(this.contractWrapper.getProvider(),this.getAddress(),b.contractAddress,b.tokenId,p);case 40:if(t.sent){t.next=43;break}throw new Error('ERC721 token "'.concat(b.tokenId,'" with contract address "').concat(b.contractAddress,'" is not approved for transfer.\n\nYou can give approval the multiwrap contract to transfer this token by running:\n\nawait sdk.getNFTCollection("').concat(b.contractAddress,'").setApprovalForToken("').concat(this.getAddress(),'", ').concat(b.tokenId,");\n\n"));case 43:n.push("1"),e.push({assetContract:b.contractAddress,tokenType:1,totalAmount:1,tokenId:b.tokenId});case 45:t.next=36;break;case 47:t.next=52;break;case 49:t.prev=49,t.t1=t.catch(34),g.e(t.t1);case 52:return t.prev=52,g.f(),t.finish(52);case 55:m=(0,o.Z)(s),t.prev=56,m.s();case 58:if((x=m.n()).done){t.next=69;break}return W=x.value,t.next=62,(0,h.dC)(this.contractWrapper.getProvider(),this.getAddress(),W.contractAddress,W.tokenId,p);case 62:if(t.sent){t.next=65;break}throw new Error('ERC1155 token "'.concat(W.tokenId,'" with contract address "').concat(W.contractAddress,'" is not approved for transfer.\n\nYou can give approval the multiwrap contract to transfer this token by running:\n\nawait sdk.getEdition("').concat(W.contractAddress,'").setApprovalForAll("').concat(this.getAddress(),'", true);\n\n'));case 65:n.push(W.totalRewards),e.push({assetContract:W.contractAddress,tokenType:2,totalAmount:w.O$.from(W.quantityPerReward).mul(w.O$.from(W.totalRewards)),tokenId:W.tokenId});case 67:t.next=58;break;case 69:t.next=74;break;case 71:t.prev=71,t.t2=t.catch(56),m.e(t.t2);case 74:return t.prev=74,m.f(),t.finish(74);case 77:return t.abrupt("return",{contents:e,numOfRewardUnits:n});case 78:case"end":return t.stop()}}),t,this,[[8,27,30,33],[34,49,52,55],[56,71,74,77]])})));return function(r){return t.apply(this,arguments)}}()},{key:"prepare",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r,e,n){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h.aW.fromContractWrapper({contractWrapper:this.contractWrapper,method:r,args:e,overrides:n}));case 1:case"end":return t.stop()}}),t,this)})));return function(r,e,n){return t.apply(this,arguments)}}()},{key:"call",value:function(){var t=(0,i.Z)((0,u.Z)().mark((function t(r,e,n){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.contractWrapper.call(r,e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(r,e,n){return t.apply(this,arguments)}}()},{key:"detectVrf",value:function(){if((0,h.cd)(this.contractWrapper,"PackVRF"))return new q(this.contractWrapper.getSignerOrProvider(),this.contractWrapper.readContract.address,this.storage,this.contractWrapper.options,this.chainId)}}]),e}(v.S);(0,f.Z)(E,"contractRoles",h.dU)}}]);
//# sourceMappingURL=2207.ceda023a.chunk.js.map